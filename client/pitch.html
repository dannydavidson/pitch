<head>
  <title>Danny Davidson</title>
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"
  />
  <meta
    name="apple-mobile-web-app-capable"
    content="yes"
  />
</head>

<body>
  {{> header}}
  <section>
    {{> intro}}
  </section>
  <section>
    {{> gigs}}
  </section>
  <section>
    {{> projects}}
  </section>
</body>

<template name="header">
  <div class="header">
    <h1>{{brand}}</h1>
    {{> nav}}
    {{#if isMobile}}
      <h3>{{connected.length}}</h3>
    {{/if}}
    <ul>
    {{#each connected}}
      <li class="connected-user">
        {{username}}
      </li>
    {{/each}}
    </ul>
    <div class="signin">
      {{loginButtons align="right"}}
    </div>
  </div>
</template>

<template name="nav">
  <div class="nav" data-collection="{{sections.0.key}}" data-id="{{sections.0.id}}">
    <h2>{{sections.0.title}}</h2>
    {{#if isOpen}}
    <ul class="nav-sections">
      {{#if sections.1.title}}
        {{#each sections}}
          <li class="{{#if active}}active{{/if}}" data-key="{{key}}">{{title}}</li>
        {{/each}}
      {{/if}}
    </ul>
    {{/if}}
  </div>
</template>

<template name="gigs">
  <div class="gigs">
    {{#each rows}}
      {{> gigRow}}
    {{/each}}
  </div>
</template>

<template name="gigRow">
  <div class="row gigRow">
    {{#each this}}
      {{> gig}}
    {{/each}}
  </div>
</template>

<template name="gig">
    <div class="content gig mobile-grid-100 tablet-grid-50 grid-33" data-id="{{_id}}" data-collection="gigs" data-stateId="{{stateId}}">

        <h3>{{title}}</h3>

        <div class="meta">
          <span class="org">
            <span class="company"><a href="{{url}}" target="_blank">{{company}}</a></span>
            <span class="location">{{location}}</span>
            <span class="timespan">{{start_date}} - {{end_date}}</span>

          </span>
        </div>
        <div class="detail-content">

          <p class="panel description {{#isActive 'description'}}active{{/isActive}}">
            {{{description}}}
          </p>


          <ul class="panel tech {{#isActive 'tech'}}active{{/isActive}}">
            {{#each stacks}}
              <li>
                <h4>{{#if url}}<a href="{{url}}" target="_blank">{{name}}</a>{{else}}{{name}}{{/if}}</h4>
                {{#if description}}
                  <p>{{{description}}}</p>
                {{/if}}
              </li>
            {{/each}}
          </ul>


          <div class="panel lessons {{#isActive 'lessons'}}active{{/isActive}}}}">
            <h4>Lessons learned</h4>
            <p class="lessons">
              {{{learnings}}}
            </p>
          </div>

      </div>

        <div class="controls">
          <span class="description {{#isActive 'description'}}selected{{/isActive}}">Summary</span>
          {{#if stacks}}
          <span class="tech {{#isActive 'tech'}}selected{{/isActive}}">Tech</span>
          {{/if}}
          {{#if learnings}}
          <span class="lessons {{#isActive 'lessons'}}selected{{/isActive}}">Lessons</span>
          {{/if}}
        </div>
    </div>
</template>

<template name="projects">

</template>

<template name="intro">
  <div class="row intro">
    {{> objective}}
    {{> education}}
  </div>
</template>

<template name="objective">
  <div class="content objective mobile-grid-100 tablet-grid-66 grid-66" data-collection="objective" data-id="{{objective._id}}">
    <div class="wrapper">
      <h3>Objective</h3>
      <h2>
        {{objective.description}}
      </h2>
    </div>
  </div>
</template>

<template name="education">
  <div class="content education mobile-grid-100 tablet-grid-33 grid-33" data-collection="education" data-id="{{education._id}}">
    <div class="wrapper">
      <h3>Education</h3>
      <div>
        <div class="school">
          <h4>{{education.title}}</h4>
          <span>{{education.year}}</span>
        </div>
        <ul>
          {{#each education.degrees}}
            <li>
              <div class="degree">{{name}}</div><div class="focus">{{area}}</div>
            </li>
          {{/each}}
        </ul>
      </div>
    </div>
  </div>

</template>
